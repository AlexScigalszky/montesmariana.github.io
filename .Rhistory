lost_tokens
model1 %>% filter(token_id %in% lost_tokens) %>% pull(text) %>% unique()
cumstrength1 <- model1 %>%
cumstrength() %>%
mutate(proportion = if_else(cues > non_cues, 'more_cues', if_else(cues < non_cues, 'less_cues', 'equal'))) %>%
left_join(cumstrength0, on = token_id) %>%
mutate(
cues_diff = (orig_cues - cues)/orig_cues,
non_cues_diff = (orig_non_cues - non_cues)/orig_non_cues,
cum_strength_diff = (orig_cum_strength - cum_strength)/orig_cum_strength
)
cumstrength1 <- model1 %>%
cumstrength() %>%
mutate(proportion = if_else(cues > non_cues, 'more_cues', if_else(cues < non_cues, 'less_cues', 'equal'))) %>%
left_join(cumstrength0, by = token_id) %>%
mutate(
cues_diff = (orig_cues - cues)/orig_cues,
non_cues_diff = (orig_non_cues - non_cues)/orig_non_cues,
cum_strength_diff = (orig_cum_strength - cum_strength)/orig_cum_strength
)
cumstrength1 <- model1 %>%
cumstrength() %>%
mutate(proportion = if_else(cues > non_cues, 'more_cues', if_else(cues < non_cues, 'less_cues', 'equal'))) %>%
left_join(cumstrength0, on = token_id) %>%
mutate(
cues_diff = (orig_cues - cues)/orig_cues,
non_cues_diff = (orig_non_cues - non_cues)/orig_non_cues,
cum_strength_diff = (orig_cum_strength - cum_strength)/orig_cum_strength
)
model1 %>% filter(token_id == lost_tokens[4]) %>% pull(text) %>% unique()
lost_tokens[4]
poor <- model1 %>%
filter(token_id %in% pull(filter(cumstrength1, proportion == "less_cues"), token_id))
balance <- model1 %>%
filter(token_id %in% pull(filter(cumstrength1, proportion == "equal"), token_id))
rich <- model1 %>%
filter(token_id %in% pull(filter(cumstrength1, proportion == "more_cues"), token_id))
n_distinct(model1$token_id)
n_distinct(poor$token_id)
n_distinct(equal$token_id)
n_distinct(balance$token_id)
n_distinct(rich$token_id)
model0 <- nocomp %>%
filter(bow_to_church <= 5,
pos %in% c('V', 'N', 'D', 'J'))
model1 <- model0 %>%
filter(in_sent > 0)
cumstrength01 <- model0 %>%
cumstrength() %>%
mutate(beyond_proportion = if_else(cues > non_cues, 'more_cues', if_else(cues < non_cues, 'less_cues', 'equal'))) %>%
rename(beyond_cues = cues,
beyond_non_cues = non_cues,
beyond_cum_strength = cum_strength)
cumstrength01
cumstrength1 <- model1 %>%
cumstrength() %>%
mutate(proportion = if_else(cues > non_cues, 'more_cues', if_else(cues < non_cues, 'less_cues', 'equal'))) %>%
left_join(cumstrength01, on = token_id) %>%
left_join(cumstrength0, on = token_id) %>%
mutate(
cues_diff = (orig_cues - cues)/orig_cues,
non_cues_diff = (orig_non_cues - non_cues)/orig_non_cues,
cum_strength_diff = (orig_cum_strength - cum_strength)/orig_cum_strength
)
cumstrength1
nrow(filter(cumstrength1, orig_proportion == "less_cues"))
nrow(filter(cumstrength1, orig_proportion == "more_cues"))
tibble(models = row_names, `less cues` = less_cues, `equal` = equal, `more cues` = more_cues)
row_names <- c("All tokens", "Bow+pos filter", "Bow+pos+sent filter")
less_cues <- c(nrow(filter(cumstrength1, orig_proportion == "less_cues")),
nrow(filter(cumstrength1, beyond_proportion == "less_cues")),
nrow(filter(cumstrength1, proportion == "less_cues")))
more_cues <- c(nrow(filter(cumstrength1, orig_proportion == "more_cues")),
nrow(filter(cumstrength1, beyond_proportion == "more_cues")),
nrow(filter(cumstrength1, proportion == "more_cues")))
equal <- c(nrow(filter(cumstrength1, orig_proportion == "equal")),
nrow(filter(cumstrength1, beyond_proportion == "equal")),
nrow(filter(cumstrength1, proportion == "equal")))
tibble(models = row_names, `less cues` = less_cues, `equal` = equal, `more cues` = more_cues)
tibble(models = row_names, `less cues` = less_cues, `equal` = equal, `more cues` = more_cues) %>%
kable() %>%
kable_styling("striped", full_width = F)
model1 %>% filter(token_id %in% poor) %>% select(token_id %>% cw, bow_to_church, cue_strength) %>% View()
model1 %>% filter(token_id %in% poor) %>% select(token_id, cw, bow_to_church, cue_strength) %>% View()
length(poor)
poor <- model1 %>%
filter(token_id %in% pull(filter(cumstrength1, proportion == "less_cues"), token_id))
length(poor)
n_distinct(model1$token_id)
cumstrength1 %>% filter(proportion == "less_cues") %>% select(token_id) %>% n_distinct()
poor <- cumstrength1 %>%
filter(proportion == "less_cues") %>%
pull(token_id) %>% unique()
balance <- cumstrength1 %>%
filter(proportion == "equal") %>%
pull(token_id) %>% unique()
rich <- cumstrength1 %>%
filter(proportion == "more_cues") %>%
pull(token_id) %>% unique()
length(poor)
length(balance)
length(rich)
n_distinct(model1$token_id) == length(poor) + length(balance) + length(rich)
poor <- model1 %>%
filter(token_id %in% pull(filter(cumstrength1, proportion == "less_cues"), token_id))
balance <- model1 %>%
filter(token_id %in% pull(filter(cumstrength1, proportion == "equal"), token_id))
rich <- model1 %>%
filter(token_id %in% pull(filter(cumstrength1, proportion == "more_cues"), token_id))
nrow(model1) == nrow(poor) + nrow(balance) + nrow(rich)
poor <- model1 %>%
filter(token_id %in% pull(filter(cumstrength1, proportion == "less_cues"), token_id)) %>%
select(token_id, text, cw, cue_strength, bow_to_church)
kable(poor) %>%
kable_styling() %>%
pack_rows(index = deframe(count(poor, token_id)), label_row_css = "background-color: #666; color: #fff;") %>%
collapse_rows(columns = 2, valign = "middle") %>%
scroll_box(height = "500px", extra_css = "margin-bottom:10px;")
poor <- model1 %>%
filter(token_id %in% pull(filter(cumstrength1, proportion == "less_cues"), token_id)) %>%
select(token_id, text, cw, cue_strength, bow_to_church)
kable(poor) %>%
kable_styling() %>%
#pack_rows(index = deframe(count(poor, token_id)), label_row_css = "background-color: #666; color: #fff;") %>%
#collapse_rows(columns = 2, valign = "middle") %>%
scroll_box(height = "500px", extra_css = "margin-bottom:10px;")
kable(poor) %>%
kable_styling() %>%
collapse_rows(columns = 2, valign = "middle") %>%
#pack_rows(index = deframe(count(poor, token_id)), label_row_css = "background-color: #666; color: #fff;") %>%
scroll_box(height = "500px", extra_css = "margin-bottom:10px;")
kable(poor) %>%
kable_styling() %>%
collapse_rows(columns = 2, valign = "middle") %>%
pack_rows(index = deframe(count(poor, token_id)), label_row_css = "background-color: #666; color: #fff;") %>%
scroll_box(height = "500px", extra_css = "margin-bottom:10px;")
kable(select(poor, -token_id)) %>%
kable_styling() %>%
collapse_rows(columns = 2, valign = "middle") %>%
pack_rows(index = deframe(count(poor, token_id)), label_row_css = "background-color: #666; color: #fff;") %>%
scroll_box(height = "500px", extra_css = "margin-bottom:10px;")
kable(select(poor, -token_id)) %>%
kable_styling() %>%
collapse_rows(columns = 1, valign = "middle") %>%
pack_rows(index = deframe(count(poor, token_id)), label_row_css = "background-color: #666; color: #fff;") %>%
scroll_box(height = "500px", extra_css = "margin-bottom:10px;")
poor <- model1 %>%
filter(token_id %in% pull(filter(cumstrength1, proportion == "less_cues"), token_id)) %>%
select(token_id, text, cw, cue_strength, bow_to_church)
kable(select(poor, -token_id)) %>%
kable_styling(fixed_thead = T) %>%
collapse_rows(columns = 1, valign = "middle") %>%
pack_rows(index = deframe(count(poor, token_id)), label_row_css = "background-color: #666; color: #fff;") %>%
scroll_box(height = "500px", extra_css = "margin-bottom:10px;")
library(tidyverse)
output_dir <- "C:/Users/u0118974/xampp/htdocs/GitHub/delhikiev.github.io/"
output <- paste0(output_dir, "church.tsv")
output_file <- paste0(output_dir, "church.tsv")
cloud <- read_tsv(output_file)
input_file <- "C:/Users/u0118974/Box Sync/church and rest/all_tokens.txt"
input <- read_tsv(input_file)
input_file <- "C:/Users/u0118974/Box Sync/church and rest/all_cues.csv"
input <- read_tsv(input_file)
input %>% count(building)
input_file <- "C:/Users/u0118974/Box Sync/church and rest/Mariana-state of affairs/c1_cues.xlsx"
library(readxl)
read_excel(input_file, sheet = 'tokens')
input <- read_excel(input_file, sheet = 'tokens') %>%
select(real_left, wordform, real_right, sense, supersense, specificity, building, community, organization, set_of_beliefs)
input <- read_excel(input_file, sheet = 'tokens') %>%
select(real_left, wordform, real_right, sense, supersense, specificity, building, comm, organization, set_of_beliefs)
input
input <- read_excel(input_file, sheet = 'tokens') %>%
select(real_left, wordform, real_right, sense, supersense, specificity, building, comm, organization, set_of_beliefs) %>%
unite(real_left, wordform, real_right, sep = " ", remove = FALSE)
input <- read_excel(input_file, sheet = 'tokens') %>%
select(real_left, wordform, real_right, sense, supersense, specificity, building, comm, organization, set_of_beliefs) %>%
unite(`_text`, real_left, wordform, real_right, sep = " ", remove = FALSE)
input
input <- read_excel(input_file, sheet = 'tokens') %>%
select(token_id, real_left, wordform, real_right, sense, supersense, specificity, building, comm, organization, set_of_beliefs) %>%
unite(`_text`, real_left, wordform, real_right, sep = " ", remove = FALSE)
input
input <- read_excel(input_file, sheet = 'tokens') %>%
select(tokens, real_left, wordform, real_right, sense, supersense, specificity, building, comm, organization, set_of_beliefs) %>%
unite(`_text`, real_left, wordform, real_right, sep = " ", remove = FALSE)
input
input <- read_excel(input_file, sheet = 'tokens') %>%
select(tokens, real_left, wordform, real_right, sense, supersense, specificity, building, comm, organization, set_of_beliefs) %>%
unite(`_text`, real_left, wordform, real_right, sep = " ", remove = FALSE) %>%
select(-real_left, -real_right)
input
cloud
input <- read_excel(input_file, sheet = 'tokens') %>%
select(tokens, real_left, wordform, real_right, sense, supersense, specificity, building, comm, organization, set_of_beliefs) %>%
unite(`_text`, real_left, wordform, real_right, sep = " ", remove = FALSE) %>%
select(-real_left, -real_right) %>%
rename(`_id` = tokens)
input
cloud %>%
rename(sentence = `_text`) %>%
left_join(input, by = `_id`)
input
cloud %>%
rename(sentence = `_text`) %>%
left_join(input, by = "_id")
cloud %>%
rename(sentence = `_text`) %>%
left_join(input, by = "_id") %>%
select(`_text`, sentence)
cloud %>%
rename(sentence = `_text`) %>%
left_join(input, by = "_id") %>%
filter(is.na(`_text`))
cloud %>%
rename(sentence = `_text`) %>%
left_join(input, by = "_id") %>%
filter(is.na(`_text`)) %>%
pull(`_id`)
cloud <- cloud %>%
rename(sentence = `_text`) %>%
left_join(input, by = "_id")
missing <- cloud %>%
filter(is.na(`_text`)) %>%
pull(`_id`)
length(missing)
missing[missing %in% input[`_id`]]
missing[missing %in% input$`_id`]
cloud <- read_tsv(output_file)
dep <- read_tsv("deps_and_bow2.tsv")
input_dir <- "C:/Users/u0118974/Box Sync/church and rest/Mariana-state of affairs/TokensPerCues/"
dep <- read_tsv("deps_and_bow2.tsv")
dep <- read_tsv(paste0(input_dir, "deps_and_bow2.tsv"))
dep
dep %>% filter(bow_to_church<=10) %>%
select(token_id, cw, cw_index, token_index)
dep %>% filter(bow_to_church<=10) %>%
select(token_id, wf, cw_index, token_index)
dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, cw_index, token_index)
input_dir <- "C:/Users/u0118974/Box Sync/church and rest/Mariana-state of affairs/"
dep <- read_tsv(paste0(input_dir, "TokensPerCues/deps_and_bow2.tsv"))
dep2 <- read_tsv(paste0(input_dir, "DepsNCues/dependencies_and_strengths_v2.txt"))
dep2 %>% filter(path_to_church == "N=C")
dep2 %>% filter(path_to_church == "N=C") %>% select(token_id, wf)
conc <- dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, cw_index, token_index, side)
dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, cw_index, token_index, side)
dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, cw_index, token_index, side) %>% group_by(token_id, side) %>% mutate(text = paste(wf))
dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, cw_index, token_index, side) %>% group_by(token_id, side) %>% summarise(text = paste(wf))
dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, side) %>% group_by(token_id, side) %>% summarise(text = paste(wf))
paste(dep$wf)
dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, side) %>% group_by(token_id, side) %>% summarise(text = paste(wf, collapse = " "))
nodes <- dep2 %>% filter(path_to_church == "N=C") %>% select(token_id, wf)
nodes
dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, side) %>% group_by(token_id, side) %>% summarise(text = paste(wf, collapse = " ")) %>%
left_join(nodes, by = "token_id")
dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, side) %>% group_by(token_id, side) %>% summarise(text = paste(wf, collapse = " ")) %>%
left_join(nodes, by = "token_id") %>%
spread(key = side, value = text)
dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, side) %>% group_by(token_id, side) %>% summarise(text = paste(wf, collapse = " ")) %>%
left_join(nodes, by = "token_id") %>%
spread(key = side, value = text) %>%
mutate(wordform = wf)
dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, side) %>% group_by(token_id, side) %>% summarise(text = paste(wf, collapse = " ")) %>%
left_join(nodes, by = "token_id") %>%
spread(key = side, value = text) %>%
mutate(wordform = wf) %>%
unite(`_text`, left, wf, right, sep = " ")
conc <- dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, side) %>% group_by(token_id, side) %>% summarise(text = paste(wf, collapse = " ")) %>%
left_join(nodes, by = "token_id") %>%
spread(key = side, value = text) %>%
mutate(wordform = wf) %>%
unite(`_text`, left, wf, right, sep = " ")
cloud <- cloud %>%
rename(sentence = `_text`) %>%
left_join(conc, by = "_id")
conc <- dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, side) %>% group_by(token_id, side) %>% summarise(text = paste(wf, collapse = " ")) %>%
left_join(nodes, by = "token_id") %>%
spread(key = side, value = text) %>%
mutate(wordform = wf) %>%
unite(`_text`, left, wf, right, sep = " ") %>%
rename(`_id` = token_id)
cloud <- cloud %>%
rename(sentence = `_text`) %>%
left_join(conc, by = "_id")
cloud
cloud %>% select(`_text`, sentence)
missing <- cloud %>%
filter(is.na(`_text`)) %>%
pull(`_id`)
length(missing)
write_tsv(cloud, output)
conc <- dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, side) %>% group_by(token_id, side) %>% summarise(text = paste(wf, collapse = " ")) %>%
left_join(nodes, by = "token_id") %>%
spread(key = side, value = text) %>%
mutate(wordform = wf) %>%
mutate(wf = str_glue("<span class='hit'>{wf}</span>")) %>%
unite(`_text`, left, wf, right, sep = " ") %>%
rename(`_id` = token_id)
dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, side) %>% group_by(token_id, side) %>% summarise(text = paste(wf, collapse = " ")) %>%
left_join(nodes, by = "token_id") %>%
spread(key = side, value = text) %>%
mutate(wordform = wf)
dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, side) %>% group_by(token_id, side) %>% summarise(text = paste(wf, collapse = " ")) %>%
left_join(nodes, by = "token_id") %>%
spread(key = side, value = text) %>%
mutate(wordform = wf) %>%
mutate(wf = str_glue("whaaaat{wf}whaaaat"))
warnings()
mutate(wf = str_replace_all(wf, ".*", str_glue("<span class='hit'>{wf}</span>")) %>%
dep %>% filter(bow_to_church<=5) %>%
dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, side) %>% group_by(token_id, side) %>% summarise(text = paste(wf, collapse = " ")) %>%
left_join(nodes, by = "token_id") %>%
spread(key = side, value = text) %>%
mutate(wordform = wf)
mutate(wf = str_replace_all(wf, ".*", str_glue("<span class='hit'>{wf}</span>"))
dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, side) %>% group_by(token_id, side) %>% summarise(text = paste(wf, collapse = " ")) %>%
left_join(nodes, by = "token_id") %>%
spread(key = side, value = text) %>%
mutate(wordform = wf) %>%
mutate(wf = str_replace_all(wf, ".*", str_glue("<span class='hit'>{wf}</span>")))
dep %>% select(token_id, text, sense, supersense, compound_status) %>% distinct() %>% write_tsv(output)
dep2 <- read_tsv(paste0(input_dir, "DepsNCues/dependencies_and_strengths_v2.txt"))
nodes <- dep2 %>% filter(path_to_church == "N=C") %>% select(token_id, wf)
dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, side) %>% group_by(token_id, side) %>% summarise(text = paste(wf, collapse = " ")) %>%
left_join(nodes, by = "token_id") %>%
spread(key = side, value = text) %>%
mutate(wordform = wf) %>%
mutate(wf = str_replace_all(wf, ".*", str_glue("<span class='hit'>{wf}</span>")))
conc <- dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, side) %>% group_by(token_id, side) %>% summarise(text = paste(wf, collapse = " ")) %>%
left_join(nodes, by = "token_id") %>%
spread(key = side, value = text) %>%
mutate(wordform = wf) %>%
mutate(wf = str_replace_all(wf, ".*", str_glue("<span class='hit'>{wf}</span>"))) %>%
unite(`_text`, left, wf, right, sep = " ") %>%
rename(`_id` = token_id)
cloud <- read_tsv(output_file)
cloud
cloud
cloud %>%
rename(`_id` = token_id, sentence = text)
cloud %>%
rename(`_id` = token_id, sentence = text) %>%
left_join(conc, by = '_id')
cloud %>%
rename(`_id` = token_id, sentence = text) %>%
left_join(conc, by = '_id') %>%
write_tsv(cloud, output_file)
cloud %>%
rename(`_id` = token_id, sentence = text) %>%
left_join(conc, by = '_id') %>%
write_tsv(output_file)
output
output_file <- paste0(output_dir, "church/church.tsv")
cloud <- read_tsv(output_file)
cloud
cloud %>%
rename(`_id` = token_id, sentence = text) %>%
left_join(conc, by = '_id')
cloud %>%
rename(sentence = text) %>%
left_join(conc, by = '_id')
cloud %>%
rename(sentence = `_text`) %>%
left_join(conc, by = '_id')
cloud %>%
rename(sentence = `_text`) %>%
left_join(conc, by = '_id') %>%
write_tsv(paste0(output_dir, "church.tsv"))
conc <- dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, side) %>% group_by(token_id, side) %>% summarise(text = paste(wf, collapse = " ")) %>%
left_join(nodes, by = "token_id") %>%
spread(key = side, value = text) %>%
mutate(wordform = wf) %>%
mutate(wf = str_replace_all(wf, "^.*$", str_glue("<span class='hit'>{wf}</span>"))) %>%
select(wf)
conc
conc <- dep %>% filter(bow_to_church<=5) %>%
select(token_id, wf, side) %>% group_by(token_id, side) %>% summarise(text = paste(wf, collapse = " ")) %>%
left_join(nodes, by = "token_id") %>%
spread(key = side, value = text) %>%
mutate(wordform = wf) %>%
mutate(wf = str_replace_all(wf, "^.*$", str_glue("<span class='hit'>{wf}</span>"))) %>%
unite(`_text`, left, wf, right, sep = " ") %>%
rename(`_id` = token_id)
conc
conc %>% pull(`_text`)
cloud
cloud %>%
rename(sentence = `_text`) %>%
left_join(conc, by = '_id')
cloud %>%
rename(sentence = `_text`) %>%
left_join(conc, by = '_id') %>%
pull(`_text`)
cloud %>%
rename(sentence = `_text`) %>%
left_join(conc, by = '_id') %>%
write_tsv(paste0(output_dir, "church.tsv"))
shiny::runApp('C:/Users/u0118974/Box Sync/church and rest/Mariana-state of affairs/TokensPerCues')
githubdir <- "C:/Users/u0118974/xampp/htdocs/GitHub/delhikiev.github.io/"
models
library(tidyverse)
setwd(githubdir)
models <- read_tsv("church.models.tsv")
models %>% count(tokens, sentbound)
setwd("C:/Users/u0118974/Box Sync/church and rest/Mariana-state of affairs/TokensPerCues/")
dep <- read_tsv("deps_and_bow2.tsv")
dep %>% filter(bow_to_church<=5, pos %in% c("N", "V", "J")) %>% pull(token_id) %>% unique() %>% length()
dep %>% filter(bow_to_church<=5, pos %in% c("N", "V", "J"), compound_status = 'simply_church') %>% pull(token_id) %>% unique() %>% length()
dep %>% filter(bow_to_church<=5, pos %in% c("N", "V", "J"), compound_status == 'simply_church') %>% pull(token_id) %>% unique() %>% length()
dep %>% filter(bow_to_church<=5, pos %in% c("N", "V", "J"), compound_status == 'simply_church') %>% count(token_id) %>% filter(n>1) %>% nrow()
models %>% filter(tokleft = 5, mincws==1) %>% pull(tokens)
models %>% filter(tokleft == 5, mincws==1) %>% pull(tokens)
models %>% filter(tokleft == 5, mincws==1) %>% max(tokens)
models %>% filter(tokleft == 5, mincws==1) %>% pull(tokens) %>% max()
dep %>% filter(bow_to_church<=5, pos %in% c("N", "V", "J"), compound_status == 'simply_church', in_sent > 0) %>% count(token_id) %>% filter(n>1) %>% nrow()
models %>% filter(tokleft == 5, mincws==1, sentbound=='bound') %>% pull(tokens) %>% max()
nocomp <- dep %>% filter(compound_status == "simply_church") %>% select(token_id, file, supersense) %>% distinct()
nocomp
nocomp <- mutate(register = str_replace_all(token_id, "^church/N/br-([a-z])[0-9].*$", "\\1")) %>%
mutate(broad_register = suppressWarnings(fct_collapse(register,
press = c('a', 'b', 'c'),
nonfic = c('d', 'e', 'f', 'g', 'h', 'j'),
fic = c('k', 'l', 'm', 'n', 'p', 'r')))) %>%
mutate(imaginfo = fct_collapse(broad_register,
imag = c('fic'),
info = c('press', 'nonfic'))
)
nocomp
nocomp  %>%  mutate(register = str_replace_all(token_id, "^church/N/br-([a-z])[0-9].*$", "\\1")) %>%
mutate(broad_register = suppressWarnings(fct_collapse(register,
press = c('a', 'b', 'c'),
nonfic = c('d', 'e', 'f', 'g', 'h', 'j'),
fic = c('k', 'l', 'm', 'n', 'p', 'r')))) %>%
mutate(imaginfo = fct_collapse(broad_register,
imag = c('fic'),
info = c('press', 'nonfic'))
)
nocomp <- nocomp  %>%  mutate(register = str_replace_all(token_id, "^church/N/br-([a-z])[0-9].*$", "\\1")) %>%
mutate(broad_register = suppressWarnings(fct_collapse(register,
press = c('a', 'b', 'c'),
nonfic = c('d', 'e', 'f', 'g', 'h', 'j'),
fic = c('k', 'l', 'm', 'n', 'p', 'r')))) %>%
mutate(imaginfo = fct_collapse(broad_register,
imag = c('fic'),
info = c('press', 'nonfic')))
nocomp
nocomp %>% count(supersense, imaginfo)
nocomp %>% count(supersense, imaginfo) %>% spread(key = imaginfo, value = n, fill = 0)
nocomp %>% count(supersense, imaginfo) %>% spread(key = supersense, value = n, fill = 0)
nocomp %>% count(supersense, broad_register) %>% spread(key = supersense, value = n, fill = 0)
setwd(githubdir)
clouds <- read_tsv('church.tsv')
clouds %>% mutate(register = str_replace_all(token_id, "^church/N/br-([a-z])[0-9].*$", "\\1")) %>%
+     mutate(broad_register = suppressWarnings(fct_collapse(register,
+                                                           press = c('a', 'b', 'c'),
+                                                           nonfic = c('d', 'e', 'f', 'g', 'h', 'j'),
+                                                           fic = c('k', 'l', 'm', 'n', 'p', 'r')))) %>%
+     mutate(imaginfo = fct_collapse(broad_register,
+                                    imag = c('fic'),
+                                    info = c('press', 'nonfic')))
clouds %>% mutate(register = str_replace_all(`_id`, "^church/N/br-([a-z])[0-9].*$", "\\1"))
clouds %>% mutate(register = str_replace_all(`_id`, "^church/N/br-([a-z])[0-9].*$", "\\1")) %>% mutate(register = fct_collapse(register, c("press" = c("a", "b", "c"), "nonfic" = c("d", "e", "f", "g", "h", "j"), "fic" c("k", 'l', 'm', 'n', 'p', 'r'))))
clouds %>% mutate(register = str_replace_all(`_id`, "^church/N/br-([a-z])[0-9].*$", "\\1")) %>% mutate(register = fct_collapse(register, c("press" = c("a", "b", "c"), "nonfic" = c("d", "e", "f", "g", "h", "j"), "fic" = c("k", 'l', 'm', 'n', 'p', 'r'))))
clouds %>% mutate(register = str_replace_all(`_id`, "^church/N/br-([a-z])[0-9].*$", "\\1")) %>% mutate(register = fct_collapse(register, c("press" = c("a", "b", "c"), "nonfic" = c("d", "e", "f", "g", "h", "j"), "fic" = c("k", 'l', 'm', 'n', 'p', 'r')))) %>% mutate(imaginfo = fct_collapse(register, c("imag" = "fic", "info" = c("press", "nonfic")))) %>% write_tsv("church.tsv")
clouds %>% mutate(register = str_replace_all(`_id`, "^church/N/br-([a-z])[0-9].*$", "\\1")) %>% mutate(broad_register = fct_collapse(register, c("press" = c("a", "b", "c"), "nonfic" = c("d", "e", "f", "g", "h", "j"), "fic" = c("k", 'l', 'm', 'n', 'p', 'r')))) %>% mutate(imaginfo = fct_collapse(broad_register, c("imag" = "fic", "info" = c("press", "nonfic")))) %>% write_tsv("church.tsv")
clouds %>% mutate(register = str_replace_all(`_id`, "^church/N/br-([a-z])[0-9].*$", "\\1")) %>% mutate(broad_register = fct_collapse(register, c("press" = c("a", "b", "c"), "nonfic" = c("d", "e", "f", "g", "h", "j"), "fic" = c("k", 'l', 'm', 'n', 'p', 'r')))) %>% count(broad_register)
clouds %>% mutate(register = str_replace_all(`_id`, "^church/N/br-([a-z])[0-9].*$", "\\1")) %>% mutate(broad_register = fct_collapse(register, c(press = c("a", "b", "c"), nonfic = c("d", "e", "f", "g", "h", "j"), fic = c("k", 'l', 'm', 'n', 'p', 'r')))) %>% count(broad_register)
clouds %>% mutate(register = str_replace_all(`_id`, "^church/N/br-([a-z])[0-9].*$", "\\1")) %>% mutate(broad_register = fct_collapse(register, press = c("a", "b", "c"), nonfic = c("d", "e", "f", "g", "h", "j"), fic = c("k", 'l', 'm', 'n', 'p', 'r'))) %>% count(broad_register)
clouds %>% mutate(register = str_replace_all(`_id`, "^church/N/br-([a-z])[0-9].*$", "\\1")) %>% mutate(register = fct_collapse(register, press = c("a", "b", "c"), nonfic = c("d", "e", "f", "g", "h", "j"), fic = c("k", 'l', 'm', 'n', 'p', 'r'))) %>% mutate(imaginfo = fct_collapse(register, imag = c("fic"), info = c("nonfic", "press")))
clouds %>% mutate(register = str_replace_all(`_id`, "^church/N/br-([a-z])[0-9].*$", "\\1")) %>% mutate(register = fct_collapse(register, press = c("a", "b", "c"), nonfic = c("d", "e", "f", "g", "h", "j"), fic = c("k", 'l', 'm', 'n', 'p', 'r'))) %>% mutate(imaginfo = fct_collapse(register, imag = c("fic"), info = c("nonfic", "press"))) %>% count(imaginfo)
clouds %>% mutate(register = str_replace_all(`_id`, "^church/N/br-([a-z])[0-9].*$", "\\1")) %>% mutate(register = fct_collapse(register, press = c("a", "b", "c"), nonfic = c("d", "e", "f", "g", "h", "j"), fic = c("k", 'l', 'm', 'n', 'p', 'r'))) %>% mutate(imaginfo = fct_collapse(register, imag = c("fic"), info = c("nonfic", "press"))) %>% write_tsv("church.tsv")
clouds %>% mutate(register = str_replace_all(`_id`, "^church/N/br-([a-z])[0-9].*$", "\\1")) %>% mutate(register = fct_collapse(register, press = c("a", "b", "c"), nonfic = c("d", "e", "f", "g", "h", "j"), fic = c("k", 'l', 'm', 'n', 'p', 'r'))) %>% mutate(imaginfo = fct_collapse(register, imag = c("fic"), info = c("nonfic", "press"))) %>% count(register)
clouds %>% mutate(register = str_replace_all(`_id`, "^church/N/br-([a-z])[0-9].*$", "\\1")) %>% mutate(register = fct_collapse(register, press = c("a", "b", "c"), nonfic = c("d", "e", "f", "g", "h", "j"), fic = c("k", 'l', 'm', 'n', 'p', 'r'))) %>% count(register)
clouds <- clouds %>% mutate(register = str_replace_all(`_id`, "^church/N/br-([a-z])[0-9].*$", "\\1")) %>% mutate(broad_register = fct_collapse(register, press = c("a", "b", "c"), nonfic = c("d", "e", "f", "g", "h", "j"), fic = c("k", 'l', 'm', 'n', 'p', 'r'))) %>% mutate(imaginfo = fct_collapse(broad_register, imag = c("fic"), info = c("nonfic", "press"))) %>% count(register)
clouds <- read_tsv('church.tsv')
clouds <- clouds %>% rename(broad_register = register) %>% mutate(register = str_replace_all(`_id`, "^church/N/br-([a-z])[0-9].*$", "\\1"))
clouds %>% count(register)
clouds %>% mutate(medium_register = fct_collapse(register, press = c('a', 'b'), essays = c('d', 'f', 'g'), tech = c('e', 'h'), fiction = c('k', 'l', 'm', 'p')))
clouds %>% mutate(medium_register = fct_collapse(register, press = c('a', 'b'), essays = c('d', 'f', 'g'), tech = c('e', 'h'), fiction = c('k', 'l', 'm', 'p'))) %>% count(medium_register)
clouds %>% count(register)
clouds %>% ggplot() + geom_bar(aes(register))
clouds %>% mutate(register = fct_recode(register, press_reportage = 'a')) %>% ggplot() + geom_bar(aes(register))
clouds %>% mutate(register = fct_recode(register, press_reportage = 'a', press_editorial = 'b')) %>% ggplot() + geom_bar(aes(register))
clouds %>% mutate(register = fct_recode(register, press_reportage = 'a', press_editorial = 'b', religion = 'd', skill_hobbies = 'e', popular_lore = 'f', belles_lettres = 'g', miscellaneous = 'h', fiction_gral = 'k', fiction_mystery = 'l', fiction_science = 'm', fiction_romance = 'p')) %>% ggplot() + geom_bar(aes(register))
clouds %>% mutate(register = fct_recode(register, press_reportage = 'a', press_editorial = 'b', religion = 'd', skill_hobbies = 'e', popular_lore = 'f', belles_lettres = 'g', miscellaneous = 'h', fiction_gral = 'k', fiction_mystery = 'l', fiction_science = 'm', fiction_romance = 'p')) %>% ggplot() + geom_bar(aes(register, color = imaginfo))
clouds %>% mutate(register = fct_recode(register, press_reportage = 'a', press_editorial = 'b', religion = 'd', skill_hobbies = 'e', popular_lore = 'f', belles_lettres = 'g', miscellaneous = 'h', fiction_gral = 'k', fiction_mystery = 'l', fiction_science = 'm', fiction_romance = 'p')) %>% ggplot() + geom_bar(aes(register, fill = imaginfo))
clouds %>% mutate(register = fct_recode(register, press_reportage = 'a', press_editorial = 'b', religion = 'd', skill_hobbies = 'e', popular_lore = 'f', belles_lettres = 'g', miscellaneous = 'h', fiction_gral = 'k', fiction_mystery = 'l', fiction_science = 'm', fiction_romance = 'p')) %>% ggplot() + geom_bar(aes(register, fill = broad_register))
clouds %>% mutate(register = fct_recode(register, press_reportage = 'a', press_editorial = 'b', religion = 'd', skill_hobbies = 'e', popular_lore = 'f', belles_lettres = 'g', miscellaneous = 'h', fiction_gral = 'k', fiction_mystery = 'l', fiction_science = 'm', fiction_romance = 'p')) %>% ggplot() + geom_bar(aes(broad_register, fill = register))
clouds %>% mutate(register = fct_recode(register, press_reportage = 'a', press_editorial = 'b', religion = 'd', skill_hobbies = 'e', popular_lore = 'f', belles_lettres = 'g', miscellaneous = 'h', fiction_gral = 'k', fiction_mystery = 'l', fiction_science = 'm', fiction_romance = 'p')) %>% ggplot() + geom_bar(aes(broad_register, fill = supersense))
clouds %>% mutate(register = fct_recode(register, press_reportage = 'a', press_editorial = 'b', religion = 'd', skill_hobbies = 'e', popular_lore = 'f', belles_lettres = 'g', miscellaneous = 'h', fiction_gral = 'k', fiction_mystery = 'l', fiction_science = 'm', fiction_romance = 'p')) %>% ggplot() + geom_bar(aes(broad_register, fill = sense))
clouds %>% mutate(register = fct_recode(register, press_reportage = 'a', press_editorial = 'b', religion = 'd', skill_hobbies = 'e', popular_lore = 'f', belles_lettres = 'g', miscellaneous = 'h', fiction_gral = 'k', fiction_mystery = 'l', fiction_science = 'm', fiction_romance = 'p')) %>% ggplot() + geom_bar(aes(register, fill = sense))
